
Ø·ÙŠØ¨ Ø¨Ø³ Ø§Ø¹Ù…Ù„ custom order Ù„ÙŠØ´ Ù…Ø§ Ø¨ÙˆØµÙ„Ù†ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ø§Ù„Ù…ÙƒØ§Ù† ÙŠÙ„ÙŠ Ø­Ø·Ù‡ Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠØ´ÙŠØ±Øª
Ø¯Ø¹Ù†ÙŠ Ø£ÙØ­Øµ ÙƒÙˆØ¯ Custom Design Ù„Ø£ÙÙ‡Ù… Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø¹Ø¯Ù… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ù…ÙˆØ¶Ø¹.
ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ ÙˆØ§ÙƒØªØ´Ø§Ù Ø£Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ³ØªØ®Ø¯Ù… React ÙˆTypeScriptØŒ ÙˆÙƒØªØ¨Øª ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ Ø¹Ù† Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ§Ù„Ù…ÙŠØ²Ø§ØªØŒ ÙˆØ³Ø£ÙˆØ§ØµÙ„ ÙØ­Øµ ÙƒÙˆØ¯ CustomDesignSection Ù„ÙÙ‡Ù… Ù…Ø´ÙƒÙ„Ø© Ø¹Ø¯Ù… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ù…ÙˆØ¶Ø¹.

ÙˆØ¬Ø¯Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©!
Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¶ÙŠÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªØµÙ…ÙŠÙ… Ù…Ø®ØµØµ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©ØŒ Ø§Ù„ÙƒÙˆØ¯ Ø­Ø§Ù„ÙŠØ§Ù‹ ÙŠØ­ÙØ¸ ÙÙ‚Ø· ØµÙˆØ±Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… (Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù„ÙŠ Ø±ÙØ¹Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) Ù„ÙƒÙ† Ù„Ø§ ÙŠØ­ÙØ¸:
Ù…ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠØ´ÙŠØ±Øª (position)
Ø­Ø¬Ù… Ø§Ù„ØªØµÙ…ÙŠÙ… (scale)
Ø¯ÙˆØ±Ø§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… (rotation)
Ù‡Ù„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ Ø£Ùˆ Ø§Ù„Ø®Ù„ÙÙŠ
Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø³Ø·Ø± 112 Ù…Ù† CustomDesignSection.tsx:
TypeScript
image: frontDesign || backDesign || "",
Ù‡Ø°Ø§ ÙŠØ±Ø³Ù„ ÙÙ‚Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©ØŒ Ù„ÙƒÙ† Ù„Ø§ ÙŠØ±Ø³Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¶Ø¹ ÙˆØ§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„Ø¯ÙˆØ±Ø§Ù†.
Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:
Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© (screenshot) Ù„Ù„ØªØµÙ…ÙŠÙ… ÙƒÙ…Ø§ ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠØ´ÙŠØ±Øª
Ø£Ùˆ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… (position, scale, rotation) ÙÙŠ Ø§Ù„Ø·Ù„Ø¨
Ù‡Ù„ ØªØ±ÙŠØ¯Ù†ÙŠ Ø£Ù† Ø£ØµÙ„Ø­ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ
Ø¨Ø¯ÙŠ ÙŠØ­ÙØ¸Ù„ÙŠ Ø§Ù„ØµÙˆØ±Ø© ÙŠÙ„ÙŠ Ø±ÙØ¹Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªÙƒÙˆÙ† ÙÙˆÙ‚ ØµÙˆØ±Ø© Ø§Ù„ØªÙŠØ´ÙŠØ±Øª Ø§Ù„Ø§ØµÙ„ÙŠØ© ÙŠÙ„ÙŠ Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙ‡Ù…Øª Ø¹Ù„ÙŠ.
Ø§Ù‚ØªØ±Ø§Ø­ Ù…Ø¹Ø±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©
ÙÙ‡Ù…Øª Ø¹Ù„ÙŠÙƒ ØªÙ…Ø§Ù…Ø§Ù‹! Ø¨Ø¯Ùƒ Ù„Ù…Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¹Ù…Ù„ custom orderØŒ ÙŠØªÙ… Ø­ÙØ¸ ØµÙˆØ±Ø© Ù†Ù‡Ø§Ø¦ÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ†:
ØµÙˆØ±Ø© Ø§Ù„ØªÙŠØ´ÙŠØ±Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© (Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹)
Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø±ÙØ¹Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙˆÙ‚Ù‡Ø§
Ø¨Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¶Ø¹ ÙˆØ§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ù„ÙŠ Ø­Ø·Ù‡Ù…
ÙŠØ¹Ù†ÙŠ screenshot Ù„Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙƒÙ…Ø§ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù€ preview.
Ø±Ø­ Ø£ØµÙ„Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¢Ù†.
ØªÙ…Ø§Ù…! Ø¹Ø¯Ù„Øª Ø§Ù„ÙƒÙˆØ¯. Ø§Ù„Ø¢Ù† Ù„Ù…Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ÙŠÙ ØªØµÙ…ÙŠÙ… Ù…Ø®ØµØµ Ù„Ù„Ø³Ù„Ø©ØŒ Ø±Ø­ ÙŠØªÙ…:
Ø¥Ù†Ø´Ø§Ø¡ ØµÙˆØ±Ø© Ù…Ø±ÙƒØ¨Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† ØµÙˆØ±Ø© Ø§Ù„ØªÙŠØ´ÙŠØ±Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø±ÙØ¹Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¶Ø¹ ÙˆØ§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„Ø¯ÙˆØ±Ø§Ù† - Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø±Ø­ ØªÙƒÙˆÙ† Ø¨Ù†ÙØ³ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ø´Ø§ÙÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ù€ preview
Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨ØŒ ÙØ£Ù†Øª ÙƒØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø±Ø­ ØªØ´ÙˆÙ Ø¨Ø§Ù„Ø¶Ø¨Ø· ÙƒÙŠÙ Ø¨Ø¯Ùˆ Ø§Ù„ØªØµÙ…ÙŠÙ…
Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø¨ÙŠØ³ØªØ®Ø¯Ù… HTML Canvas Ù„Ø¯Ù…Ø¬ Ø§Ù„ØµÙˆØ±ØªÙŠÙ† Ù…Ø¹ Ø¨Ø¹Ø¶ Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ¶ÙŠÙÙ‡Ø§ Ù„Ù„Ø³Ù„Ø©.
Ø¨Ø¯Ùƒ ØªØ¬Ø±Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ø£Ùˆ ÙÙŠ Ø´ÙŠ ØªØ§Ù†ÙŠ Ø¨Ø¯Ùƒ ØªØ¹Ø¯Ù„Ù‡ØŸ
ÙˆÙŠÙ† Ø§Ù„ÙƒÙˆØ¯ ÙˆÙˆØ¨ÙŠÙ† Ø§Ø­Ø·Ù‡ØŸ
Ø§Ù„ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ! Ø®Ù„ÙŠÙ†ÙŠ Ø£ÙˆØ±ÙŠÙƒ ÙˆÙŠÙ† Ø¨Ø§Ù„Ø¶Ø¨Ø·:
Ø§Ù„Ù…Ù„Ù: client/src/components/sections/CustomDesignSection.tsx
Ø£Ù†Ø§ Ø¹Ø¯Ù„Øª Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. Ø±Ø­ Ø£Ø±Ø³Ù„Ùƒ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¹Ø¯Ù„ ÙƒØ§Ù…Ù„ Ø¹Ø´Ø§Ù† ØªØ³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¹Ù†Ø¯Ùƒ.
Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¯ Ù„ÙŠØ­ÙØ¸ ØµÙˆØ±Ø© Ù…Ø±ÙƒØ¨Ø© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„ØªÙŠØ´ÙŠØ±Øª ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ù…Ø¹ Ø­ÙØ¸ Ù…ÙˆØ¶Ø¹ØŒ Ø­Ø¬Ù…ØŒ ÙˆØ¯ÙˆØ±Ø§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… ÙƒÙ…Ø§ Ø¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©. Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø­Ø§Ù„ÙŠ.

ØªÙ…Ø§Ù…! Ø¬Ù‡Ø²ØªÙ„Ùƒ ÙƒÙ„ Ø´ÙŠ:
Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø©:
CustomDesignSection-UPDATED.tsx - Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙƒØ§Ù…Ù„
instructions.md - ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ØªÙØµÙŠÙ„
ÙƒÙŠÙ ØªØ·Ø¨Ù‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:
Ø±ÙˆØ­ Ø¹Ù„Ù‰ Ù…Ø´Ø±ÙˆØ¹Ùƒ koon7r-website
Ø§ÙØªØ­ Ø§Ù„Ù…Ø³Ø§Ø±: client/src/components/sections/
Ø§Ø³ØªØ¨Ø¯Ù„ Ù…Ù„Ù CustomDesignSection.tsx Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¨Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±ÙÙ‚
Ø´ØºÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: pnpm dev
Ø¬Ø±Ø¨ Custom Design ÙˆØ´ÙˆÙ Ø§Ù„Ù†ØªÙŠØ¬Ø©!
Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:
Ø£Ø¶ÙØª Ø¯Ø§Ù„Ø© captureDesignImage() Ø§Ù„Ù„ÙŠ Ø¨ØªØ¯Ù…Ø¬ ØµÙˆØ±Ø© Ø§Ù„ØªÙŠØ´ÙŠØ±Øª Ù…Ø¹ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø±ÙØ¹Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆØ¨ØªØ±Ø³Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨.
Ø§Ù„Ø¢Ù† Ù„Ù…Ø§ ÙŠÙˆØµÙ„Ùƒ Ø·Ù„Ø¨ØŒ Ø±Ø­ ØªØ´ÙˆÙ Ø¨Ø§Ù„Ø¶Ø¨Ø· Ø´Ùˆ Ø´ÙƒÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙŠ Ø¨Ø¯Ùˆ Ø§Ù„Ø²Ø¨ÙˆÙ†! ðŸŽ¨âœ¨
CustomDesignSection-UPDATED.tsx
Ø±Ù…Ø² Â· 17.50 KB
ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
Markdown Â· 3.21 KB

Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©
Ù„Ø³Ø§ Ù…Ø§ ÙˆØµÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
Ø¢Ù‡ ØµØ­! Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„ØªÙ‡ Ø¨ÙŠØ­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© ÙÙŠ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø³ Ù…Ø§ Ø¨ÙŠØ±Ø³Ù„Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù….
Ø®Ù„ÙŠÙ†ÙŠ Ø£Ø´ÙˆÙ ÙƒÙˆØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… ÙˆØ£Ø¹Ø¯Ù„Ù‡ Ø¹Ø´Ø§Ù† ÙŠØ±Ø³Ù„ Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ…Ø§Ù†.
ØªÙ… ØªØ¹Ø¯ÙŠÙ„ ÙƒÙˆØ¯ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„ÙŠØ´Ù…Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø®ØµØµØ© Ø¹Ø¨Ø± Ø§Ù„Ø¨ÙˆØªØŒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØµÙŠØºØ© FormData ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´ÙØ±Ø©ØŒ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø±Ø¶ Ø§Ù„ØªØµØ§Ù…ÙŠÙ… Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.

Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…ÙƒØªØ¨Ø© form-data ÙÙŠ Ø§Ù„ØªØ¨Ø¹ÙŠØ§ØªØŒ ÙˆØ£Ø¶ÙØªÙ‡Ø§ Ø¥Ù„Ù‰ Ù…Ù„Ù package.json Ù„Ø¶Ù…Ø§Ù† Ø¯Ø¹Ù… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø®ØµØµØ© Ø¹Ø¨Ø± Ø§Ù„Ø¨ÙˆØª. Ø³Ø£ØªØ§Ø¨Ø¹ Ø§Ù„Ø¢Ù† Ø§Ø³ØªÙ†Ø³Ø§Ø® ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.

ØªÙ…Ø§Ù…! Ø§Ù„Ø¢Ù† Ø¹Ø¯Ù„Øª ÙƒÙ…Ø§Ù† ÙƒÙˆØ¯ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¹Ø´Ø§Ù† ÙŠØ±Ø³Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©.
Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø© (3 Ù…Ù„ÙØ§Øª):
CustomDesignSection-UPDATED.tsx (Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©)
routers-UPDATED.ts (Ø¬Ø¯ÙŠØ¯) â† ÙƒÙˆØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
package-UPDATED.json (Ø¬Ø¯ÙŠØ¯) â† Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© form-data
instructions-complete.md â† ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø© Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©
Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:
ÙÙŠ routers.ts:
Ø¨Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†ØµÙŠØ©ØŒ Ø§Ù„ÙƒÙˆØ¯ Ø¨ÙŠÙØ­Øµ ÙƒÙ„ Ù…Ù†ØªØ¬
Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ù†ØªØ¬ "Custom" ÙˆÙÙŠÙ‡ ØµÙˆØ±Ø©ØŒ Ø¨ÙŠØ­ÙˆÙ„Ù‡Ø§ Ù…Ù† base64 Ù„Ù€ buffer
Ø¨ÙŠØ±Ø³Ù„Ù‡Ø§ ÙƒØµÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù…Ø¹ caption ÙÙŠÙ‡ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„Ù…Ù‚Ø§Ø³
ÙÙŠ package.json:
Ø£Ø¶ÙØª Ù…ÙƒØªØ¨Ø© form-data Ø§Ù„Ù„ÙŠ Ø¨ØªØ³ØªØ®Ø¯Ù… Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±
ÙƒÙŠÙ ØªØ·Ø¨Ù‚:
Bash
# 1. Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø«Ù„Ø§Ø«Ø©
# 2. Ù†Ø²Ù„ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
pnpm install

# 3. Ø´ØºÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
pnpm dev
Ø§Ù„Ø¢Ù† Ù„Ù…Ø§ ÙŠÙˆØµÙ„Ùƒ Ø·Ù„Ø¨ custom designØŒ Ø±Ø­ ØªÙˆØµÙ„Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…:
ðŸ“ Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© Ø¨ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
ðŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø±ÙƒØ¨ (Ø§Ù„ØªÙŠØ´ÙŠØ±Øª + Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ù…ÙˆØ¶Ø¹Ù‡ Ø§Ù„ØµØ­ÙŠØ­)
Ø¬Ø±Ø¨ ÙˆØ®Ø¨Ø±Ù†ÙŠ Ø¥Ø°Ø§ Ø§Ø´ØªØºÙ„! ðŸš€
routers-UPDATED.ts
Ø±Ù…Ø² Â· 10.71 KB
package-UPDATED.json
Ø±Ù…Ø² Â· 3.72 KB
ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ± Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø®ØµØµ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
Markdown Â· 6.35 KB

Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©
ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ù…Ø©
ÙƒÙŠÙ ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªÙŠØ¬Ø©ØŸ
Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©
Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Manus
routers-UPDATED.ts
import { COOKIE_NAME } from "@shared/const";
import { getSessionCookieOptions } from "./_core/cookies";
import { systemRouter } from "./_core/systemRouter";
import { publicProcedure, protectedProcedure, router } from "./_core/trpc";
import { z } from "zod";
import { createOrder, getUserOrders, getAllOrders, createMessage, getMessages, markMessageAsRead, getSetting, updateSetting, saveCustomDesign } from "./db";
import { notifyOwner } from "./_core/notification";
import { TRPCError } from "@trpc/server";

export const appRouter = router({
  system: systemRouter,

  auth: router({
    me: publicProcedure.query(opts => opts.ctx.user),
    logout: publicProcedure.mutation(({ ctx }) => {
      const cookieOptions = getSessionCookieOptions(ctx.req);
      ctx.res.clearCookie(COOKIE_NAME, { ...cookieOptions, maxAge: -1 });
      return {
        success: true,
      } as const;
    }),
    adminLogin: publicProcedure
      .input(
        z.object({
          email: z.string().email(),
          password: z.string(),
        })
      )
      .mutation(async ({ input, ctx }) => {
        const adminEmail = process.env.ADMIN_EMAIL;
        const adminPassword = process.env.ADMIN_PASSWORD;

        if (!adminEmail || !adminPassword) {
          throw new TRPCError({
            code: "INTERNAL_SERVER_ERROR",
            message: "Admin credentials not configured",
          });
        }

        if (input.email !== adminEmail || input.password !== adminPassword) {
          throw new TRPCError({
            code: "UNAUTHORIZED",
            message: "Invalid email or password",
          });
        }

        // Set session cookie
        const cookieOptions = getSessionCookieOptions(ctx.req);
        ctx.res.cookie(COOKIE_NAME, "admin_session", cookieOptions);

        return { success: true };
      }),
  }),

  orders: router({
    create: publicProcedure
      .input(
        z.object({
          customerName: z.string().min(1),
          customerEmail: z.string().email().optional(),
          customerPhone: z.string().min(1),
          customerAddress: z.string().min(1),
          items: z.array(
            z.object({
              id: z.number(),
              name: z.string(),
              price: z.number(),
              size: z.string().optional(),
              image: z.string(),
              quantity: z.number(),
            })
          ),
          notes: z.string().optional(),
        })
      )
      .mutation(async ({ input, ctx }) => {
        const orderId = `order_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        const totalAmount = input.items.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );

        const order = await createOrder({
          id: orderId,
          userId: ctx.user?.id,
          customerName: input.customerName,
          customerEmail: input.customerEmail,
          customerPhone: input.customerPhone,
          customerAddress: input.customerAddress,
          items: JSON.stringify(input.items),
          totalAmount,
          notes: input.notes,
          status: "pending",
        });

        // Notify owner about new order
        const itemsList = input.items
          .map((item) => `${item.name} (${item.size || "N/A"}) x${item.quantity} - $${item.price}`)
          .join("\n");

        await notifyOwner({
          title: `New Order: ${orderId}`,
          content: `Customer: ${input.customerName}\nPhone: ${input.customerPhone}\nEmail: ${input.customerEmail || "N/A"}\nAddress: ${input.customerAddress}\n\nItems:\n${itemsList}\n\nTotal: $${totalAmount}\n\nNotes: ${input.notes || "None"}`,
        });

        // Send Telegram notification
        const telegramToken = process.env.TELEGRAM_BOT_TOKEN;
        const telegramChatId = process.env.TELEGRAM_CHAT_ID;
        if (telegramToken && telegramChatId) {
          try {
            const message = `New Order: ${orderId}\n\nCustomer: ${input.customerName}\nPhone: ${input.customerPhone}\nEmail: ${input.customerEmail || "N/A"}\nAddress: ${input.customerAddress}\n\nItems:\n${itemsList}\n\nTotal: $${totalAmount}\n\nNotes: ${input.notes || "None"}`;
            
            // Send text message first
            await fetch(`https://api.telegram.org/bot${telegramToken}/sendMessage`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                chat_id: telegramChatId,
                text: message,
              }),
            });

            // Send images for custom design items
            for (const item of input.items) {
              if (item.name.toLowerCase().includes("custom") && item.image) {
                try {
                  // Check if image is base64 data URL
                  if (item.image.startsWith("data:image")) {
                    // Convert base64 to buffer
                    const base64Data = item.image.split(",")[1];
                    const buffer = Buffer.from(base64Data, "base64");
                    
                    // Create form data for photo upload
                    const FormData = (await import("form-data")).default;
                    const formData = new FormData();
                    formData.append("chat_id", telegramChatId);
                    formData.append("photo", buffer, {
                      filename: `${item.name.replace(/\s+/g, "_")}.png`,
                      contentType: "image/png",
                    });
                    formData.append("caption", `${item.name} - Size: ${item.size || "N/A"}`);

                    await fetch(`https://api.telegram.org/bot${telegramToken}/sendPhoto`, {
                      method: "POST",
                      body: formData,
                    });
                  }
                } catch (imgError) {
                  console.error("Failed to send custom design image:", imgError);
                }
              }
            }
          } catch (error) {
            console.error("Failed to send Telegram notification:", error);
          }
        }

        return order;
      }),

    myOrders: protectedProcedure.query(async ({ ctx }) => {
      return await getUserOrders(ctx.user.id);
    }),

    all: protectedProcedure.query(async ({ ctx }) => {
      if (ctx.user.role !== "admin") {
        throw new TRPCError({ code: "FORBIDDEN" });
      }
      return await getAllOrders();
    }),

    updateStatus: protectedProcedure
      .input(
        z.object({
          orderId: z.string(),
          status: z.enum(["pending", "confirmed", "processing", "shipped", "delivered", "cancelled"]),
        })
      )
      .mutation(async ({ input, ctx }) => {
        if (ctx.user.role !== "admin") {
          throw new TRPCError({ code: "FORBIDDEN" });
        }

        const db = await (await import("./db")).getDb();
        if (!db) throw new Error("Database not available");

        const { orders } = await import("../drizzle/schema");
        const { eq } = await import("drizzle-orm");

        await db.update(orders).set({ status: input.status }).where(eq(orders.id, input.orderId));
        return { success: true };
      }),

    deleteOrder: protectedProcedure
      .input(z.object({ orderId: z.string() }))
      .mutation(async ({ input, ctx }) => {
        if (ctx.user.role !== "admin") {
          throw new TRPCError({ code: "FORBIDDEN" });
        }

        const db = await (await import("./db")).getDb();
        if (!db) throw new Error("Database not available");

        const { orders } = await import("../drizzle/schema");
        const { eq } = await import("drizzle-orm");

        await db.delete(orders).where(eq(orders.id, input.orderId));
        return { success: true };
      }),
  }),

  messages: router({
    create: publicProcedure
      .input(
        z.object({
          name: z.string().min(1),
          email: z.string().email(),
          message: z.string().min(1),
        })
      )
      .mutation(async ({ input }) => {
        const messageId = `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        const msg = await createMessage({
          id: messageId,
          name: input.name,
          email: input.email,
          message: input.message,
        });

        // Send Telegram notification
        const telegramToken = process.env.TELEGRAM_BOT_TOKEN;
        const telegramChatId = process.env.TELEGRAM_CHAT_ID;
        if (telegramToken && telegramChatId) {
          try {
            await fetch(`https://api.telegram.org/bot${telegramToken}/sendMessage`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                chat_id: telegramChatId,
                text: `New Message from ${input.name}\n\nEmail: ${input.email}\n\nMessage:\n${input.message}`,
              }),
            });
          } catch (error) {
            console.error("Failed to send Telegram notification:", error);
          }
        }

        return msg;
      }),

    all: protectedProcedure.query(async ({ ctx }) => {
      if (ctx.user.role !== "admin") {
        throw new TRPCError({ code: "FORBIDDEN" });
      }
      return await getMessages();
    }),

    markAsRead: protectedProcedure
      .input(z.object({ messageId: z.string() }))
      .mutation(async ({ input, ctx }) => {
        if (ctx.user.role !== "admin") {
          throw new TRPCError({ code: "FORBIDDEN" });
        }
        await markMessageAsRead(input.messageId);
        return { success: true };
      }),
  }),

  settings: router({
    get: protectedProcedure
      .input(z.object({ key: z.string() }))
      .query(async ({ input, ctx }) => {
        if (ctx.user.role !== "admin") {
          throw new TRPCError({ code: "FORBIDDEN" });
        }
        return await getSetting(input.key);
      }),

    update: protectedProcedure
      .input(
        z.object({
          key: z.string(),
          value: z.string(),
        })
      )
      .mutation(async ({ input, ctx }) => {
        if (ctx.user.role !== "admin") {
          throw new TRPCError({ code: "FORBIDDEN" });
        }
        await updateSetting(input.key, input.value);
        return { success: true };
      }),
  }),

  customDesign: router({
    save: publicProcedure
      .input(
        z.object({
          orderId: z.string(),
          frontDesignUrl: z.string().optional(),
          backDesignUrl: z.string().optional(),
        })
      )
      .mutation(async ({ input }) => {
        const designId = `design_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        await saveCustomDesign({
          id: designId,
          orderId: input.orderId,
          frontDesignUrl: input.frontDesignUrl,
          backDesignUrl: input.backDesignUrl,
        });
        return { success: true };
      }),
  }),
});

export type AppRouter = typeof appRouter;

Koon7r Website GitHub Repository - Manus
